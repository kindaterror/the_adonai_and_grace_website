/* Extracted styles from inline <style> for necklace-comb story */
  .kid-theme{ --kid-blue:#1A237E; --kid-sand:#E6D7C3; --kid-gold:#F4B400; --kid-ink:#2a2a2a; --kid-body:'Nunito',system-ui,-apple-system,Segoe UI,Roboto,sans-serif; --kid-display:'Baloo 2','Nunito',system-ui,sans-serif; --nc-sky-top:#EBF3FF; --nc-sky-mid:#DFEAFF; --nc-sky-deep:#CFDAFF; --nc-sky-vignette:rgba(26,35,126,0.18); position:relative; overflow-x:hidden; background: radial-gradient(1200px 600px at 45% -20%, rgba(244,180,0,0.08), transparent 70%), radial-gradient(900px 480px at 80% 0%, rgba(255,255,255,0.12), transparent 75%), linear-gradient(180deg, var(--nc-sky-top) 0%, var(--nc-sky-mid) 42%, var(--nc-sky-deep) 100%); }
  .kid-theme *{ font-family:var(--kid-body); }
  .nc-bg{ position:fixed; inset:0; z-index:0; background-position:center; background-repeat:no-repeat; background-size:cover; background-color:#0d2b55; opacity:.92; filter: blur(6px) brightness(1.02) saturate(1.05); transform: scale(1.06); pointer-events:none; }
  @media (max-width:820px){ .nc-bg{ background-size:contain; transform:none; } }
  .kid-theme::before{ content:""; position:fixed; inset:-10%; pointer-events:none; background: radial-gradient(80% 60% at 50% 55%, transparent 40%, rgba(0,0,0,0.05) 85%, rgba(0,0,0,0.08) 100%), radial-gradient(1200px 900px at 10% 10%, rgba(255,255,255,0.55), transparent 60%); mix-blend-mode:multiply; z-index:0; }
  @keyframes nc-sparkle{ 0%,100%{transform:translateY(0);opacity:.6} 50%{transform:translateY(-6px);opacity:.9} }
  .nc-spark-layer{ position:fixed; inset:0; pointer-events:none; z-index:0; background-image: radial-gradient(2px 2px at 20% 30%, rgba(255,255,255,0.8) 50%, transparent 51%), radial-gradient(2px 2px at 70% 20%, rgba(255,255,255,0.8) 50%, transparent 51%), radial-gradient(1.6px 1.6px at 85% 40%, rgba(255,255,255,0.7) 50%, transparent 51%), radial-gradient(1.8px 1.8px at 30% 70%, rgba(255,255,255,0.8) 50%, transparent 51%), radial-gradient(2.2px 2.2px at 60% 75%, rgba(255,255,255,0.75) 50%, transparent 51%); animation:nc-sparkle 6.5s ease-in-out infinite; opacity:.5; }
  .nc-pearl-arc{ position:fixed; left:50%; transform:translateX(-50%); bottom:-10px; width:110vw; height:160px; z-index:0; pointer-events:none; background: radial-gradient(10px 10px at 5% 60%, rgba(255,255,255,0.9) 60%, transparent 62%), radial-gradient(10px 10px at 15% 75%, rgba(255,255,255,0.95) 60%, transparent 62%), radial-gradient(10px 10px at 25% 84%, rgba(255,255,255,0.92) 60%, transparent 62%), radial-gradient(10px 10px at 35% 89%, rgba(255,255,255,0.95) 60%, transparent 62%), radial-gradient(10px 10px at 45% 92%, rgba(255,255,255,0.92) 60%, transparent 62%), radial-gradient(10px 10px at 55% 92%, rgba(255,255,255,0.92) 60%, transparent 62%), radial-gradient(10px 10px at 65% 89%, rgba(255,255,255,0.95) 60%, transparent 62%), radial-gradient(10px 10px at 75% 84%, rgba(255,255,255,0.92) 60%, transparent 62%), radial-gradient(10px 10px at 85% 75%, rgba(255,255,255,0.95) 60%, transparent 62%), radial-gradient(10px 10px at 95% 60%, rgba(255,255,255,0.9) 60%, transparent 62%); filter: drop-shadow(0 6px 10px rgba(26,35,126,.12)); opacity:.85; }
  .kid-fore{ position:relative; z-index:2; }
  .popup-open-book-wrapper{ display:flex; justify-content:center; }
  .kid-btn{ border-radius:999px; font-weight:700; }
  .kid-heading{ font-family:var(--kid-display); letter-spacing:.2px; }
  .nc-figure{ display:grid; grid-template-rows:auto 1fr; gap:12px; z-index:1; position:relative; }
  .nc-imageFrame{ position:relative; border-radius:18px; background:#fff; overflow:hidden; outline:3px solid rgba(255,255,255,0.6); box-shadow: inset 0 0 0 10px rgba(255,255,255,0.6), 0 8px 24px rgba(26,35,126,0.12), 0 3px 12px rgba(26,35,126,0.10); background-image: radial-gradient(circle at 10px 10px, rgba(255,255,255,0.9) 0 6px, transparent 7px), radial-gradient(circle at 32px 10px, rgba(255,255,255,0.9) 0 6px, transparent 7px), radial-gradient(circle at 54px 10px, rgba(255,255,255,0.9) 0 6px, transparent 7px); background-size:100% 20px; background-repeat:repeat-x; }
  /* Unified media sizing: make the frame keep consistent aspect and let media fill it */
  .nc-imageFrame{ aspect-ratio:16/9; }
  @media (max-height:640px){ .nc-imageFrame{ aspect-ratio: 4 / 3; } }
  .nc-imageFrame > .nc-video,
  .nc-imageFrame > .nc-live2d,
  .nc-imageFrame > img.nc-illustration { width:100%; height:100%; object-fit:cover; display:block; }
  .nc-illustration{ object-position:center center; }
  .nc-video{ object-position:center center; background:#fff; }
  /* Optional tiny GPU nudge to avoid sub-pixel seams */
  .nc-video.nc-video-bleed{ transform:translateZ(0); }
  .nc-live2d{ width:100%; height:100% !important; display:block; }
  .nc-corner{ position:absolute; width:28px; height:28px; display:grid; place-items:center; background:rgba(255,255,255,0.7); border-radius:8px; color:var(--kid-blue); box-shadow:0 3px 8px rgba(26,35,126,.15); }
  .nc-corner--tl{ left:10px; top:10px } .nc-corner--tr{ right:10px; top:10px } .nc-corner--bl{ left:10px; bottom:10px } .nc-corner--br{ right:10px; bottom:10px }
  .nc-caption{ background:rgba(255,255,255,0.92); border:1px solid rgba(0,0,0,0.06); border-radius:16px; padding:14px 16px 16px; text-align:left; box-shadow:0 6px 18px rgba(26,35,126,0.08), 0 2px 8px rgba(26,35,126,0.06); min-height:140px; display:grid; gap:6px; }
  .nc-narration{ color:#374151; font-size:.98rem; line-height:1.35; margin:0; }
  .nc-dialog{ color:var(--kid-blue); font-style:italic; font-weight:700; margin:0; }
  .popup-page-left .story-content, .popup-page-right .story-content{ display:grid; grid-template-rows:auto 1fr; gap:14px; }
  .popup-page-nav-left, .popup-page-nav-right{ background:rgba(255,255,255,.85)!important; border:1px solid rgba(0,0,0,0.06)!important; color:var(--kid-blue); }
  .popup-page-nav-left:hover, .popup-page-nav-right:hover{ background:#fff!important; box-shadow:0 10px 24px rgba(26,35,126,.15); }
  .popup-book-fold{ pointer-events:none; }
  .nc-typing{ white-space:pre-wrap; }
  .nc-caret{ margin-left:2px; animation:nc-blink 1s steps(1,end) infinite; }
  @keyframes nc-blink{ 0%,49%{opacity:1} 50%,100%{opacity:0} }
  .btn-solid-white{ background:#fff!important; color:var(--kid-blue)!important; border:1px solid rgba(0,0,0,0.06)!important; }
  .btn-solid-white:hover{ background:#fff!important; box-shadow:0 10px 24px rgba(26,35,126,.15); }
  .book-fullscreen-mode .kid-theme::before, .book-fullscreen-mode .nc-spark-layer, .book-fullscreen-mode .nc-pearl-arc, .book-fullscreen-mode .popup-book-surface, .book-fullscreen-mode .popup-book-fold { display:none; }
  .nc-title-glow { color:#ffffff; font-weight:800; text-shadow: 0 0 8px rgba(0,0,0,0.75), 0 2px 12px rgba(0,0,0,0.65), 0 0 2px rgba(255,255,255,0.3); }
  .nc-title-wrap { background:rgba(0,0,0,0.45); backdrop-filter:blur(8px) saturate(1.2); -webkit-backdrop-filter:blur(8px) saturate(1.2); border-radius:12px; padding:.5rem 1rem; display:inline-block; }
  .nc-title-fancy { margin:0; font-weight:900; font-size:clamp(1.35rem,3.6vw,2rem); letter-spacing:.3px; line-height:1.1; position:relative; color:#fff; text-shadow:0 3px 12px rgba(0,0,0,.35),0 1px 2px rgba(0,0,0,.45); }
  .nc-loader{ --nc-loader-top: rgba(244,180,0,0.08); --nc-loader-mid: var(--nc-sky-mid); --nc-loader-deep: var(--nc-sky-deep); position:fixed; inset:0; z-index:60; display:grid; place-items:center; background: radial-gradient(1200px 700px at 50% -10%, var(--nc-loader-top), transparent 60%), linear-gradient(180deg, var(--nc-loader-mid) 0%, var(--nc-loader-mid) 45%, var(--nc-loader-deep) 100%); transition:opacity .4s ease, visibility .4s ease; }
  .nc-loader.hidden{ opacity:0; visibility:hidden; }
  .nc-load-card{ width:min(560px,92vw); border-radius:20px; padding:28px 28px 24px; background:#ffffff; box-shadow:0 30px 80px rgba(26,35,126,.22),0 14px 30px rgba(26,35,126,.16),0 6px 14px rgba(26,35,126,.12); text-align:center; border:1px solid rgba(0,0,0,.06); color:var(--kid-blue); }
  .nc-brand{ display:inline-grid; place-items:center; width:96px; height:96px; border-radius:50%; background: radial-gradient(var(--kid-gold) 0 45%, rgba(244,180,0,.45) 46% 100%); margin-inline:auto; box-shadow:0 8px 18px rgba(244,180,0,.25); position:relative; }
  .nc-beads{ position:absolute; inset:0; animation:nc-rotate 2.8s linear infinite; }
  .nc-beads::before,.nc-beads::after{ content:""; position:absolute; top:8px; left:50%; width:8px; height:8px; border-radius:50%; background:#fff; transform:translateX(-50%); box-shadow:0 24px 0 0 #fff,0 48px 0 0 #fff,0 72px 0 0 #fff,0 96px 0 0 rgba(255,255,255,.85); opacity:.95; }
  .nc-beads::after{ top:16px; opacity:.75; }
  @keyframes nc-rotate{ to{ transform:rotate(360deg);} }
  .nc-title-xl{ margin:14px 0 4px; font-family:var(--kid-display); font-weight:800; font-size:clamp(22px,2.4vw,28px); }
  .nc-subtle{ color:#334155; font-size:.95rem; }
  .nc-progress{ margin-top:18px; height:10px; width:100%; border-radius:999px; background:#F1F5F9; overflow:hidden; position:relative; border:1px solid rgba(0,0,0,.06); }
  .nc-progress>span{ position:absolute; inset:0; transform:translateX(-100%); animation:nc-indeterminate 1.2s cubic-bezier(.22,.61,.36,1) infinite;
    /* themed highlight using the story's --kid-gold value for consistency */
    background: linear-gradient(90deg,
      rgba(244,180,0,0) 0%,
      rgba(244,180,0,0.45) 35%,
      var(--kid-gold) 50%,
      #d99b00 65%,
      rgba(244,180,0,0) 100%);
    box-shadow: 0 0 18px rgba(244,180,0,.12); }
  @keyframes nc-indeterminate{ 0%{transform:translateX(-100%)} 100%{transform:translateX(100%)} }
  .nc-enter{ opacity:0; transform:translateY(12px) scale(.985); }
  .nc-enter.nc-enter-active{ opacity:1; transform:translateY(0) scale(1); transition:opacity .45s ease, transform .45s ease; }
  .popup-open-book-wrapper.nc-enter.nc-enter-active .popup-flip-book-container .popup-book-wrapper{ animation:nc-lift 420ms cubic-bezier(.2,.9,.2,1) 60ms both; }
  @keyframes nc-lift{ from{ transform:translateY(6px) scale(.992);} to{ transform:translateY(0) scale(1);} }
  .popup-book-wrapper.nc-opening{ will-change: transform; }
  .popup-book-wrapper.nc-opening .popup-page-left, .popup-book-wrapper.nc-opening .popup-page-right{ overflow:hidden; }
  .popup-book-wrapper.nc-opening .popup-page-left{ clip-path: inset(0 50% 0 0 round 12px); animation: nc-open-left 950ms cubic-bezier(.19,1,.22,1) both; }
  .popup-book-wrapper.nc-opening .popup-page-right{ clip-path: inset(0 0 0 50% round 12px); animation: nc-open-right 950ms cubic-bezier(.19,1,.22,1) both; animation-delay:20ms; }
  @keyframes nc-open-left{ 0%{ clip-path: inset(0 50% 0 0 round 12px);} 55%{ clip-path: inset(0 6% 0 0 round 12px);} 100%{ clip-path: inset(0 0 0 0 round 12px);} }
  @keyframes nc-open-right{ 0%{ clip-path: inset(0 0 0 50% round 12px);} 55%{ clip-path: inset(0 0 0 6% round 12px);} 100%{ clip-path: inset(0 0 0 0 round 12px);} }
  .nc-bg-video-wrap{ position:fixed; inset:0; z-index:0; overflow:hidden; pointer-events:none; }
  .nc-bg-video{ position:absolute; top:50%; left:50%; transform:translate(-50%, -50%) scale(1.06); width:auto; height:auto; min-width:100%; min-height:100%; object-fit:cover; filter: blur(6px) brightness(1.02) saturate(1.05); opacity:.9; }
  /* Skeleton spread while dynamic pages load */
  .nc-skeleton-spread{ position:absolute; inset:0; display:grid; grid-template-columns:1fr 1fr; gap:0; z-index:3; pointer-events:none; }
  .nc-skeleton-page{ margin:0; background:linear-gradient(135deg,#f1f5f9 0%,#e2e8f0 40%,#f1f5f9 80%); border-radius:0; animation:nc-skel 1.2s ease-in-out infinite; opacity:.55; }
  @keyframes nc-skel{ 0%,100%{filter:brightness(1)} 50%{filter:brightness(1.08)} }
